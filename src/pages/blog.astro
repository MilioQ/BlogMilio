---
import BaseLayout from "../layouts/BaseLayout.astro";
import BlogPost from "../components/BlogPost.astro";
import SocialList from "../components/SocialList.astro";

const allPosts = await Astro.glob("../pages/posts/*.md");
const pageTitle = "";
const dateOptions: object = {
    year: "numeric",
    month: "long",
    day: "numeric",
};

// Ordenar los posts por fecha
allPosts.sort((b, a) => {
    const dateA = new Date(a.frontmatter.pubDate);
    const dateB = new Date(b.frontmatter.pubDate);
    return dateB.getTime() - dateA.getTime(); // Convertir a milisegundos y restar para comparar
});
const tags = [...new Set(allPosts.map((post) => post.frontmatter.tags).flat())];

---

<BaseLayout pageTitle={pageTitle}>
    <h1 class="title mb-6">Posts</h1>
	<div class="grid gap-y-16 sm:grid-cols-[3fr_1fr] sm:gap-x-8">
		<section aria-label="Blog post list">
			<ul class="space-y-8 text-start">
				{
                    allPosts.map((post) => (<BlogPost url={post.url} title={post.frontmatter.title} />))
                }
			</ul>
		</section>
    <aside>
        <h2 class="mb-4 flex items-center text-lg font-semibold">
            <svg
                aria-hidden="true"
                class="h-6 w-6"
                fill="none"
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="1.5"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
            >
                <path d="M0 0h24v24H0z" fill="none" stroke="none" />
                <path d="M7.859 6h-2.834a2.025 2.025 0 0 0 -2.025 2.025v2.834c0 .537 .213 1.052 .593 1.432l6.116 6.116a2.025 2.025 0 0 0 2.864 0l2.834 -2.834a2.025 2.025 0 0 0 0 -2.864l-6.117 -6.116a2.025 2.025 0 0 0 -1.431 -.593z" />
                <path d="M17.573 18.407l2.834 -2.834a2.025 2.025 0 0 0 0 -2.864l-7.117 -7.116" />
                <path d="M6 9h-.01" />
            </svg>
            Tags
        </h2>
        <ul class="flex flex-wrap gap-2 text-bgColor">
            {tags.map((tag) => (
                <p><a href={`/tags/${tag}`} class="flex items-center justify-center rounded-lg bg-accent p-2">{tag}</a></p>
              ))}
        </ul>
    </aside>
</BaseLayout>
